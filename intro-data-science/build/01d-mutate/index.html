<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Siuba tutorials - Siuba tutorials</title><meta name="gridsome:hash" content="5b79327d74dc4d3edce582e45a8ffcbefe8dc8af"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.13"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="og:url" name="og:url" content="undefined/"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/intro-to-siuba/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/intro-to-siuba/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/intro-to-siuba/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/intro-to-siuba/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/intro-to-siuba/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/intro-to-siuba/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/intro-to-siuba/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/intro-to-siuba/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/intro-to-siuba/assets/css/0.styles.d3b85204.css" as="style"><link rel="preload" href="/intro-to-siuba/assets/js/app.428b0b39.js" as="script"><link rel="preload" href="/intro-to-siuba/assets/js/page--src--templates--post-vue.b38b7bf6.js" as="script"><link rel="preload" href="/intro-to-siuba/assets/js/vue-remark--tutorial--intro-data-science--build--01-d-mutate-md.1a3731a0.js" as="script"><link rel="prefetch" href="/intro-to-siuba/assets/js/34.0ce7b9e6.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/35.055b07e7.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/page--node-modules--gridsome--app--pages--404-vue.c51d3015.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/page--src--pages--about-vue.8e4ea7cb.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/page--src--pages--index-vue.0e46a878.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/page--src--pages--slides-vue.8ed539a3.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/page--src--pages--test-vue.af3a07ac.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--01-a-intro-data-science-md.88a15456.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--01-b-filter-md.286799aa.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--01-c-arrange-md.da0509ae.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--01-d-mutate-md.91b52b55.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--01-e-select-md.a97abdfb.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--01-e-wrap-up-md.f9e2c180.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--02-a-intro-data-viz-md.71af1635.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--02-b-aesthetics-md.a31940e0.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--02-c-facets-md.8ec41737.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--03-a-intro-to-summarize-md.f522913a.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--03-b-group-by-md.473deaf1.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--03-c-summary-viz-md.fab14259.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--bu--index-md.27631fdd.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--demo--01-g-test-md.a743a4da.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--demo--01-minimal-code-md.835064d2.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--demo--01-minimal-mcq-md.df0c34ac.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--demo--01-minimal-tags-md.78892c56.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--intro-data-science--build--01-a-intro-data-science-md.e561befc.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--intro-data-science--build--01-b-filter-md.c5c4058b.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--intro-data-science--build--01-c-arrange-md.42b0c4fc.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--intro-data-science--build--01-f-wrap-up-md.d347f60b.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--intro-data-science--build--01-intro-data-science-md.7be9fac2.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--intro-data-science--index-md.252b0c0e.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--intro-data-science--readme-md.1289326a.js"><link rel="prefetch" href="/intro-to-siuba/assets/js/vue-remark--tutorial--simple--01-intro-md.c7afccfb.js"><link rel="stylesheet" href="/intro-to-siuba/assets/css/0.styles.d3b85204.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" class="layout"><div class="center"><div class="left"><ul><li><h3>overview</h3></li><li><a href="/intro-to-siuba/intro-data-science/build/01-intro-data-science/">
                    Course welcome
                </a><!----></li></ul><ul><li><h3>basics</h3></li><li><a href="/intro-to-siuba/intro-data-science/build/01b-filter/">
                    Filter
                </a><!----></li><li><a href="/intro-to-siuba/intro-data-science/build/01c-arrange/">
                    Arrange
                </a><!----></li><li><a href="/intro-to-siuba/intro-data-science/build/01d-mutate/" class="active--exact active">
                    Mutate
                </a><ul></ul></li><li><a href="/intro-to-siuba/intro-data-science/build/01f-wrap-up/">
                    Wrap up
                </a><!----></li></ul></div><div id="right" class="right"><div class="content"><h1>Mutate</h1><div><div><details><div language="python" class="code-cell--container"><div class="top-bar"><div class="is-pulled-right"><!----><div class="v-spinner" style="display:none;"><div class="v-pulse v-pulse1" style="background-color:#5dc596;width:8px;height:8px;margin:2px;border-radius:100%;display:inline-block;animation-name:v-pulseStretchDelay;animation-duration:0.75s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(.2,.68,.18,1.08);animation-fill-mode:both;animation-delay:0.12s;"></div><div class="v-pulse v-pulse2" style="background-color:#5dc596;width:8px;height:8px;margin:2px;border-radius:100%;display:inline-block;animation-name:v-pulseStretchDelay;animation-duration:0.75s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(.2,.68,.18,1.08);animation-fill-mode:both;animation-delay:0.24s;"></div><div class="v-pulse v-pulse3" style="background-color:#5dc596;width:8px;height:8px;margin:2px;border-radius:100%;display:inline-block;animation-name:v-pulseStretchDelay;animation-duration:0.75s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(.2,.68,.18,1.08);animation-fill-mode:both;animation-delay:0.36s;"></div></div></div></div><div class="vue-codemirror"><textarea name="codemirror" placeholder=""></textarea></div><button>run</button><button>reset</button><div class="code-cell--output"><div></div><div class="container-editor container"></div></div></div></details><div><div class="reveal-container"><div class="reveal show-notes"><div class="slides"><section none><section none> <h1 id=the-mutate-verb>The mutate verb</h1> <p><img src=/intro-to-siuba/assets/img/model-mutate.cad47ff0.png alt=""></p> <aside class=notes> <p>You&#39;ve already learned two verbs for manipulating data: filter for extracting a subset of the observations, and arrange for sorting them. Suppose you want to change one of the variables in your dataset, based on the other ones. Or suppose you want to add a new variable. For that, you would use the mutate verb.</p> </aside></section></section><section none><section none> <h2 id=using-mutate-to-change-a-variable>Using mutate to change a variable</h2> <pre><code class=language-python>(music_top200
  &gt;&gt; mutate(streams = _.streams / 1000)
)</code></pre> <div> <style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}.dataframe thead th{text-align:right}</style><p></p> <table border=1 class=dataframe> <thead> <tr style=text-align:right> <th></th> <th>country</th> <th>position</th> <th>track_name</th> <th>artist</th> <th>streams</th> <th>duration</th> <th>continent</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>Argentina</td> <td>1</td> <td>Tusa</td> <td>KAROL G</td> <td>1858.666</td> <td>200.960</td> <td>Americas</td> </tr> <tr> <th>1</th> <td>Argentina</td> <td>2</td> <td>Tattoo</td> <td>Rauw Alejandro</td> <td>1344.382</td> <td>202.887</td> <td>Americas</td> </tr> <tr> <th>2</th> <td>Argentina</td> <td>3</td> <td>Hola - Remix</td> <td>Dalex</td> <td>1330.011</td> <td>249.520</td> <td>Americas</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>12397</th> <td>South Africa</td> <td>198</td> <td>Black And White</td> <td>Niall Horan</td> <td>11.771</td> <td>193.090</td> <td>Africa</td> </tr> <tr> <th>12398</th> <td>South Africa</td> <td>199</td> <td>When I See U</td> <td>Fantasia</td> <td>11.752</td> <td>217.347</td> <td>Africa</td> </tr> <tr> <th>12399</th> <td>South Africa</td> <td>200</td> <td>Psycho!</td> <td>MASN</td> <td>11.743</td> <td>197.217</td> <td>Africa</td> </tr> </tbody> </table> <p>12400 rows × 7 columns</p> </div> <aside class=notes> <p>First you&#39;ll learn how to change an existing variable.</p> <p>You use mutate like you would filter or arrange, after a pipe operator.</p> <p>Inside this mutate statement, what&#39;s on the right of the equals sign is what&#39;s being calculated, and what&#39;s on the left is what&#39;s being replaced. Here, you&#39;re calculating pop slash one million.</p> <p>The slash in Python performs division, so &quot;population divided by one million&quot;.</p> <p>On the left, you&#39;re saying you want to replace the existing pop column, by writing pop equals.</p> <p>The result is the same table, but with pop replaced with a new value, one that&#39;s much smaller than it was before. This is how you manipulate existing variables in the table. That&#39;s often necessary during data processing and cleaning. Just like filter and arrange, you&#39;re not altering the original gapminder data, you&#39;re just changing the value in this new data frame that&#39;s being returned.</p> </aside></section></section><section none><section none> <h2 id=using-mutate-to-add-a-new-variable>Using mutate to add a new variable</h2> <pre><code class=language-python>(music_top200
  &gt;&gt; mutate(ttl_stream_time = _.streams * _.duration)
)</code></pre> <div> <style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}.dataframe thead th{text-align:right}</style><p></p> <table border=1 class=dataframe> <thead> <tr style=text-align:right> <th></th> <th>country</th> <th>position</th> <th>track_name</th> <th>artist</th> <th>streams</th> <th>duration</th> <th>continent</th> <th>ttl_stream_time</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>Argentina</td> <td>1</td> <td>Tusa</td> <td>KAROL G</td> <td>1858666</td> <td>200.960</td> <td>Americas</td> <td>3.735175e+08</td> </tr> <tr> <th>1</th> <td>Argentina</td> <td>2</td> <td>Tattoo</td> <td>Rauw Alejandro</td> <td>1344382</td> <td>202.887</td> <td>Americas</td> <td>2.727576e+08</td> </tr> <tr> <th>2</th> <td>Argentina</td> <td>3</td> <td>Hola - Remix</td> <td>Dalex</td> <td>1330011</td> <td>249.520</td> <td>Americas</td> <td>3.318643e+08</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>12397</th> <td>South Africa</td> <td>198</td> <td>Black And White</td> <td>Niall Horan</td> <td>11771</td> <td>193.090</td> <td>Africa</td> <td>2.272862e+06</td> </tr> <tr> <th>12398</th> <td>South Africa</td> <td>199</td> <td>When I See U</td> <td>Fantasia</td> <td>11752</td> <td>217.347</td> <td>Africa</td> <td>2.554262e+06</td> </tr> <tr> <th>12399</th> <td>South Africa</td> <td>200</td> <td>Psycho!</td> <td>MASN</td> <td>11743</td> <td>197.217</td> <td>Africa</td> <td>2.315919e+06</td> </tr> </tbody> </table> <p>12400 rows × 8 columns</p> </div> <aside class=notes> <p>Alternatively, you may want to add a new variable.</p> <p>For instance, suppose you want to know the total seconds people have listened to a track. In the data you have a tracks duration in seconds, and its number of streams. This means <strong>total time listened is duration multiplied by streams</strong>.</p> <p>You would use mutate in almost the same way. You pipe your music data to the mutate verb. The asterisk in Python represents multiplication, so you write streams asterisk duration to multiply the two columns.</p> <p>Notice that to be informative, we have named the column gdp, that&#39;s what&#39;s to the left of the equals sign in our code. Column names need to be one word like this: you can&#39;t use spaces.</p> <p>Notice that in the results, there&#39;s a brand new gdp column, which is much larger than the gdp per capita.</p> </aside></section></section><section none><section none> <h2 id=answering-a-question>Answering a question</h2> <pre><code class=language-python>(music_top200
  &gt;&gt; mutate(ttl_stream_time = _.streams * _.duration)
  &gt;&gt; filter(_.country == &quot;Costa Rica&quot;)
  &gt;&gt; arrange(-_.ttl_stream_time)
)</code></pre> <div> <style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}.dataframe thead th{text-align:right}</style><p></p> <table border=1 class=dataframe> <thead> <tr style=text-align:right> <th></th> <th>country</th> <th>position</th> <th>track_name</th> <th>artist</th> <th>streams</th> <th>duration</th> <th>continent</th> <th>ttl_stream_time</th> </tr> </thead> <tbody> <tr> <th>2200</th> <td>Costa Rica</td> <td>1</td> <td>Safaera</td> <td>Bad Bunny</td> <td>338078</td> <td>295.177</td> <td>Americas</td> <td>9.979285e+07</td> </tr> <tr> <th>2202</th> <td>Costa Rica</td> <td>3</td> <td>Ignorantes</td> <td>Bad Bunny</td> <td>233113</td> <td>210.607</td> <td>Americas</td> <td>4.909523e+07</td> </tr> <tr> <th>2222</th> <td>Costa Rica</td> <td>23</td> <td>René</td> <td>Residente</td> <td>101872</td> <td>457.592</td> <td>Americas</td> <td>4.661581e+07</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>2377</th> <td>Costa Rica</td> <td>178</td> <td>Dónde Estás</td> <td>KHEA</td> <td>23177</td> <td>153.560</td> <td>Americas</td> <td>3.559060e+06</td> </tr> <tr> <th>2394</th> <td>Costa Rica</td> <td>195</td> <td>Blueberry Faygo</td> <td>Lil Mosey</td> <td>21771</td> <td>162.547</td> <td>Americas</td> <td>3.538811e+06</td> </tr> <tr> <th>2397</th> <td>Costa Rica</td> <td>198</td> <td>Ride It</td> <td>Regard</td> <td>21731</td> <td>157.606</td> <td>Americas</td> <td>3.424936e+06</td> </tr> </tbody> </table> <p>200 rows × 8 columns</p> </div> <aside class=notes> <p>Let&#39;s put together the three verbs you learned in this chapter to answer a question about our data.</p> <p>Suppose we wanted to know for a country, like Costa Rica, what songs where listened to longest.</p> <p>We would do this in three steps: </p> <ul> <li>create the column</li> <li>filter for country</li> <li>then sort</li> </ul> <p>We use mutate to create the <code>ttl_stream_time</code> column. Then we&#39;d use filter to restrict our analysis to only Costa Rica. Then we&#39;d use arrange to sort the data in descending order of our new ttl_stream_time variable.</p> <p>This gives us the answer we&#39;re looking for. The most streamed track in Costa Rica is still the first in our result. However, it looks like the track normally in the 23rd position--René by Residente--is third, since it&#39;s over 7 minutes long!</p> </aside></section></section></div></div></div></div><div language="python" class="code-cell--container"><div class="top-bar"><div class="is-pulled-right"><!----><div class="v-spinner" style="display:none;"><div class="v-pulse v-pulse1" style="background-color:#5dc596;width:8px;height:8px;margin:2px;border-radius:100%;display:inline-block;animation-name:v-pulseStretchDelay;animation-duration:0.75s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(.2,.68,.18,1.08);animation-fill-mode:both;animation-delay:0.12s;"></div><div class="v-pulse v-pulse2" style="background-color:#5dc596;width:8px;height:8px;margin:2px;border-radius:100%;display:inline-block;animation-name:v-pulseStretchDelay;animation-duration:0.75s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(.2,.68,.18,1.08);animation-fill-mode:both;animation-delay:0.24s;"></div><div class="v-pulse v-pulse3" style="background-color:#5dc596;width:8px;height:8px;margin:2px;border-radius:100%;display:inline-block;animation-name:v-pulseStretchDelay;animation-duration:0.75s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(.2,.68,.18,1.08);animation-fill-mode:both;animation-delay:0.36s;"></div></div></div></div><div class="vue-codemirror"><textarea name="codemirror" placeholder=""></textarea></div><button>run</button><button>reset</button><div class="code-cell--output"><div><table border="1" class="dataframe"><thead><tr style="text-align:right;"><th></th><th>country</th><th>position</th><th>track_name</th><th>artist</th><th>streams</th><th>duration</th><th>continent</th><th>streamed_ms</th></tr></thead><tbody><tr><th>0</th><td>Argentina</td><td>1</td><td>Tusa</td><td>KAROL G</td><td>1858666</td><td>200.960</td><td>Americas</td><td>3.735175e+08</td></tr><tr><th>1</th><td>Argentina</td><td>2</td><td>Tattoo</td><td>Rauw Alejandro</td><td>1344382</td><td>202.887</td><td>Americas</td><td>2.727576e+08</td></tr><tr><th>2</th><td>Argentina</td><td>3</td><td>Hola - Remix</td><td>Dalex</td><td>1330011</td><td>249.520</td><td>Americas</td><td>3.318643e+08</td></tr><tr><th>...</th><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr><tr><th>12397</th><td>South Africa</td><td>198</td><td>Black And White</td><td>Niall Horan</td><td>11771</td><td>193.090</td><td>Africa</td><td>2.272862e+06</td></tr><tr><th>12398</th><td>South Africa</td><td>199</td><td>When I See U</td><td>Fantasia</td><td>11752</td><td>217.347</td><td>Africa</td><td>2.554262e+06</td></tr><tr><th>12399</th><td>South Africa</td><td>200</td><td>Psycho!</td><td>MASN</td><td>11743</td><td>197.217</td><td>Africa</td><td>2.315919e+06</td></tr></tbody></table></div><div class="container-editor container"></div></div></div><h3 id="exercise-1-todo"><a href="#exercise-1-todo" aria-hidden="true"><span class="icon icon-link"></span></a>Exercise 1 TODO:</h3><p>Use the code above, and modify it find the longest streamed (<code>streamed_ms</code>) song in Canada. Is it the song in the first <code>position</code>?</p><div language="python" class="code-cell--container"><div class="top-bar"><div class="is-pulled-right"><!----><div class="v-spinner" style="display:none;"><div class="v-pulse v-pulse1" style="background-color:#5dc596;width:8px;height:8px;margin:2px;border-radius:100%;display:inline-block;animation-name:v-pulseStretchDelay;animation-duration:0.75s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(.2,.68,.18,1.08);animation-fill-mode:both;animation-delay:0.12s;"></div><div class="v-pulse v-pulse2" style="background-color:#5dc596;width:8px;height:8px;margin:2px;border-radius:100%;display:inline-block;animation-name:v-pulseStretchDelay;animation-duration:0.75s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(.2,.68,.18,1.08);animation-fill-mode:both;animation-delay:0.24s;"></div><div class="v-pulse v-pulse3" style="background-color:#5dc596;width:8px;height:8px;margin:2px;border-radius:100%;display:inline-block;animation-name:v-pulseStretchDelay;animation-duration:0.75s;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(.2,.68,.18,1.08);animation-fill-mode:both;animation-delay:0.36s;"></div></div></div></div><div class="vue-codemirror"><textarea name="codemirror" placeholder=""></textarea></div><button>run</button><button>reset</button><div class="code-cell--output"><div><pre class="language-text"><code class="language-text">()</code></pre></div><div class="container-editor container"></div></div></div><details><summary>debug</summary><button>create</button><br>
    setup code: <br><br>
    settings: {}<br>
    status: <br>
    kernel status: <br>
    phase: <br></details></div></div><div><a href="/intro-to-siuba/intro-data-science/build/01c-arrange/">prev page</a><a href="/intro-to-siuba/intro-data-science/build/01f-wrap-up/">next page</a></div></div></div></div></div>
    <script>window.__INITIAL_STATE__={"data":{"metadata":{"siteName":"Siuba tutorials","siteDescription":""},"post":{"id":"ab23fa24aeb29459d678ca42733d0864","title":"Mutate","content":"\n\u003CNotebook\n  v-slot=\"nb\"\n  branch=\"master\"\n  repo=\"machow\u002Fpurview\"\n  url=\"https:\u002F\u002Fmybinder.org\"\n  useBinder=\"1\"\n  \u003E\n\n\n\u003Cdetails v-fix-codemirror\u003E\n\u003Ccode-cell  :status=\"nb.status\" :onExecute=\"nb.execute\" :onReady=\"nb.updateSetupCode\" language=\"python\"\u003E\n\n\n    # TODO: explain how to run this, and that they only need the gist (loads tools)\n    import pandas as pd\n    from siuba import arrange, select, mutate, filter, _\n    from plotnine import ggplot, geom_point, coord_flip, aes, labs\n    \n    # temporary until I figure out where to put data\n    fname = \"https:\u002F\u002Fsiublocks.s3.us-east-2.amazonaws.com\u002Fcourse-data\u002Fmusic200.csv\"\n    music_top200 = pd.read_csv(fname)\n    \n    # tracks\n    fname = \"https:\u002F\u002Fsiublocks.s3.us-east-2.amazonaws.com\u002Fcourse-data\u002Ftrack_features.csv\"\n    track_features = pd.read_csv(fname)\n    \n    \n    # TODO: shift into a package or file\n    from siuba import pipe\n    from IPython.display import HTML, display\n    ___ = pipe(lambda x: display(HTML(\"⚠️: \u003Cb\u003EDon't forget to replace all the blanks!\u003Cb\u003E\")) and _)\n    \n    pd.set_option(\"display.max_rows\", 6)\n    \n    from IPython import get_ipython\n    # special ipython function to get the html formatter\n    html_formatter = get_ipython().display_formatter.formatters['text\u002Fhtml']\n    \n    # when you see a Shout object, call the shout_html function on it\n    html_formatter.for_type(pd.DataFrame, lambda df: df.to_html(max_rows = pd.get_option(\"display.max_rows\")))\n\n\n\n\n\u003C\u002Fcode-cell\u003E\n\u003C\u002Fdetails\u003E\n\nimport slides from '..\u002Fslides\u002F01d-slides.markdown'\n\n\u003CRevealSlides :slides=\"slides\" \u002F\u003E\n\n\u003Ccode-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  language=\"python\"\u003E\n\n\n    (music_top200\n      \u003E\u003E mutate(streamed_ms = _.streams * _.duration)\n    )\n\n\n\u003Ctemplate v-slot:output\u003E\n\n\n\n\n\u003Ctable border=\"1\" class=\"dataframe\"\u003E\n  \u003Cthead\u003E\n    \u003Ctr style=\"text-align: right;\"\u003E\n      \u003Cth\u003E\u003C\u002Fth\u003E\n      \u003Cth\u003Ecountry\u003C\u002Fth\u003E\n      \u003Cth\u003Eposition\u003C\u002Fth\u003E\n      \u003Cth\u003Etrack_name\u003C\u002Fth\u003E\n      \u003Cth\u003Eartist\u003C\u002Fth\u003E\n      \u003Cth\u003Estreams\u003C\u002Fth\u003E\n      \u003Cth\u003Eduration\u003C\u002Fth\u003E\n      \u003Cth\u003Econtinent\u003C\u002Fth\u003E\n      \u003Cth\u003Estreamed_ms\u003C\u002Fth\u003E\n    \u003C\u002Ftr\u003E\n  \u003C\u002Fthead\u003E\n  \u003Ctbody\u003E\n    \u003Ctr\u003E\n      \u003Cth\u003E0\u003C\u002Fth\u003E\n      \u003Ctd\u003EArgentina\u003C\u002Ftd\u003E\n      \u003Ctd\u003E1\u003C\u002Ftd\u003E\n      \u003Ctd\u003ETusa\u003C\u002Ftd\u003E\n      \u003Ctd\u003EKAROL G\u003C\u002Ftd\u003E\n      \u003Ctd\u003E1858666\u003C\u002Ftd\u003E\n      \u003Ctd\u003E200.960\u003C\u002Ftd\u003E\n      \u003Ctd\u003EAmericas\u003C\u002Ftd\u003E\n      \u003Ctd\u003E3.735175e+08\u003C\u002Ftd\u003E\n    \u003C\u002Ftr\u003E\n    \u003Ctr\u003E\n      \u003Cth\u003E1\u003C\u002Fth\u003E\n      \u003Ctd\u003EArgentina\u003C\u002Ftd\u003E\n      \u003Ctd\u003E2\u003C\u002Ftd\u003E\n      \u003Ctd\u003ETattoo\u003C\u002Ftd\u003E\n      \u003Ctd\u003ERauw Alejandro\u003C\u002Ftd\u003E\n      \u003Ctd\u003E1344382\u003C\u002Ftd\u003E\n      \u003Ctd\u003E202.887\u003C\u002Ftd\u003E\n      \u003Ctd\u003EAmericas\u003C\u002Ftd\u003E\n      \u003Ctd\u003E2.727576e+08\u003C\u002Ftd\u003E\n    \u003C\u002Ftr\u003E\n    \u003Ctr\u003E\n      \u003Cth\u003E2\u003C\u002Fth\u003E\n      \u003Ctd\u003EArgentina\u003C\u002Ftd\u003E\n      \u003Ctd\u003E3\u003C\u002Ftd\u003E\n      \u003Ctd\u003EHola - Remix\u003C\u002Ftd\u003E\n      \u003Ctd\u003EDalex\u003C\u002Ftd\u003E\n      \u003Ctd\u003E1330011\u003C\u002Ftd\u003E\n      \u003Ctd\u003E249.520\u003C\u002Ftd\u003E\n      \u003Ctd\u003EAmericas\u003C\u002Ftd\u003E\n      \u003Ctd\u003E3.318643e+08\u003C\u002Ftd\u003E\n    \u003C\u002Ftr\u003E\n    \u003Ctr\u003E\n      \u003Cth\u003E...\u003C\u002Fth\u003E\n      \u003Ctd\u003E...\u003C\u002Ftd\u003E\n      \u003Ctd\u003E...\u003C\u002Ftd\u003E\n      \u003Ctd\u003E...\u003C\u002Ftd\u003E\n      \u003Ctd\u003E...\u003C\u002Ftd\u003E\n      \u003Ctd\u003E...\u003C\u002Ftd\u003E\n      \u003Ctd\u003E...\u003C\u002Ftd\u003E\n      \u003Ctd\u003E...\u003C\u002Ftd\u003E\n      \u003Ctd\u003E...\u003C\u002Ftd\u003E\n    \u003C\u002Ftr\u003E\n    \u003Ctr\u003E\n      \u003Cth\u003E12397\u003C\u002Fth\u003E\n      \u003Ctd\u003ESouth Africa\u003C\u002Ftd\u003E\n      \u003Ctd\u003E198\u003C\u002Ftd\u003E\n      \u003Ctd\u003EBlack And White\u003C\u002Ftd\u003E\n      \u003Ctd\u003ENiall Horan\u003C\u002Ftd\u003E\n      \u003Ctd\u003E11771\u003C\u002Ftd\u003E\n      \u003Ctd\u003E193.090\u003C\u002Ftd\u003E\n      \u003Ctd\u003EAfrica\u003C\u002Ftd\u003E\n      \u003Ctd\u003E2.272862e+06\u003C\u002Ftd\u003E\n    \u003C\u002Ftr\u003E\n    \u003Ctr\u003E\n      \u003Cth\u003E12398\u003C\u002Fth\u003E\n      \u003Ctd\u003ESouth Africa\u003C\u002Ftd\u003E\n      \u003Ctd\u003E199\u003C\u002Ftd\u003E\n      \u003Ctd\u003EWhen I See U\u003C\u002Ftd\u003E\n      \u003Ctd\u003EFantasia\u003C\u002Ftd\u003E\n      \u003Ctd\u003E11752\u003C\u002Ftd\u003E\n      \u003Ctd\u003E217.347\u003C\u002Ftd\u003E\n      \u003Ctd\u003EAfrica\u003C\u002Ftd\u003E\n      \u003Ctd\u003E2.554262e+06\u003C\u002Ftd\u003E\n    \u003C\u002Ftr\u003E\n    \u003Ctr\u003E\n      \u003Cth\u003E12399\u003C\u002Fth\u003E\n      \u003Ctd\u003ESouth Africa\u003C\u002Ftd\u003E\n      \u003Ctd\u003E200\u003C\u002Ftd\u003E\n      \u003Ctd\u003EPsycho!\u003C\u002Ftd\u003E\n      \u003Ctd\u003EMASN\u003C\u002Ftd\u003E\n      \u003Ctd\u003E11743\u003C\u002Ftd\u003E\n      \u003Ctd\u003E197.217\u003C\u002Ftd\u003E\n      \u003Ctd\u003EAfrica\u003C\u002Ftd\u003E\n      \u003Ctd\u003E2.315919e+06\u003C\u002Ftd\u003E\n    \u003C\u002Ftr\u003E\n  \u003C\u002Ftbody\u003E\n\u003C\u002Ftable\u003E\n\n\n\n\u003C\u002Ftemplate\u003E\n\n\u003C\u002Fcode-cell\u003E\n\n\n### Exercise 1 TODO: \n\nUse the code above, and modify it find the longest streamed (`streamed_ms`) song in Canada. Is it the song in the first `position`?\n\n\u003Ccode-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  language=\"python\"\u003E\n\n\n    (\n    \n    )\n\n\n\u003Ctemplate v-slot:output\u003E\n\n\n\n\n    ()\n\n\n\n\u003C\u002Ftemplate\u003E\n\n\u003C\u002Fcode-cell\u003E\n\n\n\n\u003C\u002FNotebook\u003E\n\n","chunk":"basics"},"allPosts":{"edges":[{"node":{"id":"c07baa2fd37433b322b7f771f1fbf360","path":"\u002Fintro-data-science\u002F","title":"","chunk":"","headings":[],"fileInfo":{"directory":"intro-data-science"}},"next":{"path":"\u002Fintro-data-science\u002Fbuild\u002F01-intro-data-science\u002F"},"previous":null},{"node":{"id":"652e7785105c1207d315c249131f5b7f","path":"\u002Fintro-data-science\u002Fbuild\u002F01-intro-data-science\u002F","title":"Course welcome","chunk":"overview","headings":[],"fileInfo":{"directory":"intro-data-science\u002Fbuild"}},"next":{"path":"\u002Fintro-data-science\u002Fbuild\u002F01b-filter\u002F"},"previous":{"path":"\u002Fintro-data-science\u002F"}},{"node":{"id":"ba1582d1c6d27a522e11b03b97dff7b9","path":"\u002Fintro-data-science\u002Fbuild\u002F01b-filter\u002F","title":"Filter","chunk":"basics","headings":[],"fileInfo":{"directory":"intro-data-science\u002Fbuild"}},"next":{"path":"\u002Fintro-data-science\u002Fbuild\u002F01c-arrange\u002F"},"previous":{"path":"\u002Fintro-data-science\u002Fbuild\u002F01-intro-data-science\u002F"}},{"node":{"id":"ad19f602c352dfe1d79fefe29da15f7d","path":"\u002Fintro-data-science\u002Fbuild\u002F01c-arrange\u002F","title":"Arrange","chunk":"basics","headings":[],"fileInfo":{"directory":"intro-data-science\u002Fbuild"}},"next":{"path":"\u002Fintro-data-science\u002Fbuild\u002F01d-mutate\u002F"},"previous":{"path":"\u002Fintro-data-science\u002Fbuild\u002F01b-filter\u002F"}},{"node":{"id":"ab23fa24aeb29459d678ca42733d0864","path":"\u002Fintro-data-science\u002Fbuild\u002F01d-mutate\u002F","title":"Mutate","chunk":"basics","headings":[],"fileInfo":{"directory":"intro-data-science\u002Fbuild"}},"next":{"path":"\u002Fintro-data-science\u002Fbuild\u002F01f-wrap-up\u002F"},"previous":{"path":"\u002Fintro-data-science\u002Fbuild\u002F01c-arrange\u002F"}},{"node":{"id":"cce2a731d9223cc9c35f6ffb69ea5176","path":"\u002Fintro-data-science\u002Fbuild\u002F01f-wrap-up\u002F","title":"Wrap up","chunk":"basics","headings":[{"value":"Putting it together","anchor":"#putting-it-together"},{"value":"Exercises","anchor":"#exercises"}],"fileInfo":{"directory":"intro-data-science\u002Fbuild"}},"next":{"path":"\u002Fintro-data-science\u002Freadme\u002F"},"previous":{"path":"\u002Fintro-data-science\u002Fbuild\u002F01d-mutate\u002F"}},{"node":{"id":"8b3cd3b360b88a353088b673cfcd8a66","path":"\u002Fintro-data-science\u002Freadme\u002F","title":"","chunk":"","headings":[],"fileInfo":{"directory":"intro-data-science"}},"next":null,"previous":{"path":"\u002Fintro-data-science\u002Fbuild\u002F01f-wrap-up\u002F"}}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/intro-to-siuba/assets/js/app.428b0b39.js" defer></script><script src="/intro-to-siuba/assets/js/page--src--templates--post-vue.b38b7bf6.js" defer></script><script src="/intro-to-siuba/assets/js/vue-remark--tutorial--intro-data-science--build--01-d-mutate-md.1a3731a0.js" defer></script>
  </body>
</html>
