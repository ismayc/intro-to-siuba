{"hash":"5b1efbc371cff5ca7f8fa3f9961e51ddd14eff54","data":{"metadata":{"siteName":"Siuba tutorials","siteDescription":""},"post":{"id":"304b0ad64f216acee275ac20fab41940","title":"Facets","content":"\n<Notebook\n  v-slot=\"nb\"\n  branch=\"master\"\n  repo=\"machow/purview\"\n  url=\"https://mybinder.org\"\n  useBinder=\"1\"\n  >\n\n\n# Facets\n\n\n<details v-fix-codemirror>\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\" :onReady=\"nb.updateSetupCode\" language=\"python\">\n\n\n    # TODO: explain how to run this, and that they only need the gist (loads tools)\n    import pandas as pd\n    from siuba import arrange, select, mutate, filter, _\n    from plotnine import ggplot, geom_point, coord_flip, aes, labs\n    \n    # temporary until I figure out where to put data\n    url = \"https://siublocks.s3.us-east-2.amazonaws.com/music_top200.csv\"\n    music_top200 = pd.read_csv(url)\n    \n    \n    # TODO: shift into a package or file\n    from siuba import pipe\n    from IPython.display import HTML, display\n    ___ = pipe(lambda x: display(HTML(\"⚠️: <b>Don't forget to replace all the blanks!</b>\")) and _)\n    \n    pd.set_option(\"display.max_rows\", 6)\n    \n    from IPython import get_ipython\n    # special ipython function to get the html formatter\n    html_formatter = get_ipython().display_formatter.formatters['text/html']\n    \n    # when you see a Shout object, call the shout_html function on it\n    html_formatter.for_type(pd.DataFrame, lambda df: df.to_html(classes = \"dataframe\", max_rows = pd.get_option(\"display.max_rows\")))\n\n\n\n\n</code-cell>\n</details>\n\n\n## Wrapping\n\nTODO: fill in explanation\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  language=\"python\">\n\n\n    (music_top200\n      >> arrange(_.position, -_.danceability)\n    )\n\n\n<template v-slot:output>\n\n\n\n\n<table border=\"1\" class=\"dataframe dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>country</th>\n      <th>country_code</th>\n      <th>position</th>\n      <th>track_name</th>\n      <th>artist</th>\n      <th>streams</th>\n      <th>track_id</th>\n      <th>danceability</th>\n      <th>energy</th>\n      <th>key</th>\n      <th>loudness</th>\n      <th>mode</th>\n      <th>speechiness</th>\n      <th>acousticness</th>\n      <th>instrumentalness</th>\n      <th>liveness</th>\n      <th>valence</th>\n      <th>tempo</th>\n      <th>track_href</th>\n      <th>analysis_url</th>\n      <th>duration_ms</th>\n      <th>time_signature</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>6617</th>\n      <td>Italy</td>\n      <td>it</td>\n      <td>1</td>\n      <td>Bando</td>\n      <td>ANNA</td>\n      <td>2228788</td>\n      <td>0kzGjSRHGVcaWxagzQwAyD</td>\n      <td>0.970</td>\n      <td>0.739</td>\n      <td>10.0</td>\n      <td>-4.917</td>\n      <td>0.0</td>\n      <td>0.2950</td>\n      <td>0.155000</td>\n      <td>0.000000</td>\n      <td>0.111</td>\n      <td>0.414</td>\n      <td>120.061</td>\n      <td>https://api.spotify.com/v1/tracks/0kzGjSRHGVcaWxagzQwAyD</td>\n      <td>https://api.spotify.com/v1/audio-analysis/0kzGjSRHGVcaWxagzQwAyD</td>\n      <td>168000.0</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>10817</th>\n      <td>Slovakia</td>\n      <td>sk</td>\n      <td>1</td>\n      <td>Viac</td>\n      <td>Nerieš</td>\n      <td>107047</td>\n      <td>2eLTkjdcbBCTew9qvn6hzz</td>\n      <td>0.915</td>\n      <td>0.388</td>\n      <td>6.0</td>\n      <td>-5.587</td>\n      <td>1.0</td>\n      <td>0.0382</td>\n      <td>0.058300</td>\n      <td>0.000229</td>\n      <td>0.106</td>\n      <td>0.760</td>\n      <td>110.004</td>\n      <td>https://api.spotify.com/v1/tracks/2eLTkjdcbBCTew9qvn6hzz</td>\n      <td>https://api.spotify.com/v1/audio-analysis/2eLTkjdcbBCTew9qvn6hzz</td>\n      <td>212727.0</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>1417</th>\n      <td>Bolivia, Plurinational State of</td>\n      <td>bo</td>\n      <td>1</td>\n      <td>Si Veo a Tu Mamá</td>\n      <td>Bad Bunny</td>\n      <td>148430</td>\n      <td>41wtwzCZkXwpnakmwJ239F</td>\n      <td>0.900</td>\n      <td>0.603</td>\n      <td>2.0</td>\n      <td>-5.313</td>\n      <td>1.0</td>\n      <td>0.0646</td>\n      <td>0.402000</td>\n      <td>0.000005</td>\n      <td>0.134</td>\n      <td>0.824</td>\n      <td>129.928</td>\n      <td>https://api.spotify.com/v1/tracks/41wtwzCZkXwpnakmwJ239F</td>\n      <td>https://api.spotify.com/v1/audio-analysis/41wtwzCZkXwpnakmwJ239F</td>\n      <td>170972.0</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>12016</th>\n      <td>Uruguay</td>\n      <td>uy</td>\n      <td>200</td>\n      <td>Creo</td>\n      <td>Callejeros</td>\n      <td>11300</td>\n      <td>5Bi9Cq5oVFy1OtUgecbegZ</td>\n      <td>0.382</td>\n      <td>0.912</td>\n      <td>2.0</td>\n      <td>-2.898</td>\n      <td>1.0</td>\n      <td>0.0551</td>\n      <td>0.001690</td>\n      <td>0.000008</td>\n      <td>0.233</td>\n      <td>0.560</td>\n      <td>187.941</td>\n      <td>https://api.spotify.com/v1/tracks/5Bi9Cq5oVFy1OtUgecbegZ</td>\n      <td>https://api.spotify.com/v1/audio-analysis/5Bi9Cq5oVFy1OtUgecbegZ</td>\n      <td>289760.0</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>7816</th>\n      <td>Malta</td>\n      <td>mt</td>\n      <td>200</td>\n      <td>Wonderwall - Remastered</td>\n      <td>Oasis</td>\n      <td>1976</td>\n      <td>5qqabIl2vWzo9ApSC317sa</td>\n      <td>0.378</td>\n      <td>0.896</td>\n      <td>2.0</td>\n      <td>-4.066</td>\n      <td>1.0</td>\n      <td>0.0407</td>\n      <td>0.000452</td>\n      <td>0.000000</td>\n      <td>0.194</td>\n      <td>0.469</td>\n      <td>174.302</td>\n      <td>https://api.spotify.com/v1/tracks/5qqabIl2vWzo9ApSC317sa</td>\n      <td>https://api.spotify.com/v1/audio-analysis/5qqabIl2vWzo9ApSC317sa</td>\n      <td>258773.0</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>6816</th>\n      <td>Italy</td>\n      <td>it</td>\n      <td>200</td>\n      <td>7 miliardi</td>\n      <td>Massimo Pericolo</td>\n      <td>240815</td>\n      <td>67vjEOTkBppbVLUUq5mEJz</td>\n      <td>0.307</td>\n      <td>0.740</td>\n      <td>1.0</td>\n      <td>-4.089</td>\n      <td>1.0</td>\n      <td>0.1400</td>\n      <td>0.032400</td>\n      <td>0.000678</td>\n      <td>0.486</td>\n      <td>0.362</td>\n      <td>142.920</td>\n      <td>https://api.spotify.com/v1/tracks/67vjEOTkBppbVLUUq5mEJz</td>\n      <td>https://api.spotify.com/v1/audio-analysis/67vjEOTkBppbVLUUq5mEJz</td>\n      <td>167090.0</td>\n      <td>3.0</td>\n    </tr>\n  </tbody>\n</table>\n\n\n\n</template>\n\n</code-cell>\n\n\n### Exercise 1: \n\nBelow is code with the arrange verb removed. Modify it to arrange by artist name and popularity.\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  language=\"python\">\n\n\n    (music_top200\n      >> ___\n    )\n\n\n<template v-slot:output>\n\n\n⚠️: <b>Don't forget to replace all the blanks!</b>\n\n\n</template>\n\n</code-cell>\n\n\n### Exercise 2:\n\nModify the code below to arrange by artist name in **descending** order.\n\n<code-cell  :status=\"nb.status\" :onExecute=\"nb.execute\"  language=\"python\">\n\n\n    (music_top200\n    \n    )\n\n\n<template v-slot:output>\n\n\n\n\n<table border=\"1\" class=\"dataframe dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>country</th>\n      <th>country_code</th>\n      <th>position</th>\n      <th>track_name</th>\n      <th>artist</th>\n      <th>streams</th>\n      <th>track_id</th>\n      <th>danceability</th>\n      <th>energy</th>\n      <th>key</th>\n      <th>loudness</th>\n      <th>mode</th>\n      <th>speechiness</th>\n      <th>acousticness</th>\n      <th>instrumentalness</th>\n      <th>liveness</th>\n      <th>valence</th>\n      <th>tempo</th>\n      <th>track_href</th>\n      <th>analysis_url</th>\n      <th>duration_ms</th>\n      <th>time_signature</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>United States</td>\n      <td>us</td>\n      <td>1</td>\n      <td>The Box</td>\n      <td>Roddy Ricch</td>\n      <td>12987027</td>\n      <td>0nbXyq5TXYPCO7pr3N8S4I</td>\n      <td>0.896</td>\n      <td>0.586</td>\n      <td>10.0</td>\n      <td>-6.687</td>\n      <td>0.0</td>\n      <td>0.0559</td>\n      <td>0.1040</td>\n      <td>0.00000</td>\n      <td>0.790</td>\n      <td>0.642</td>\n      <td>116.971</td>\n      <td>https://api.spotify.com/v1/tracks/0nbXyq5TXYPCO7pr3N8S4I</td>\n      <td>https://api.spotify.com/v1/audio-analysis/0nbXyq5TXYPCO7pr3N8S4I</td>\n      <td>196653.0</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>United States</td>\n      <td>us</td>\n      <td>2</td>\n      <td>Myron</td>\n      <td>Lil Uzi Vert</td>\n      <td>9163134</td>\n      <td>56uXDJRCuoS7abX3SkzHKQ</td>\n      <td>0.770</td>\n      <td>0.655</td>\n      <td>8.0</td>\n      <td>-6.976</td>\n      <td>0.0</td>\n      <td>0.2960</td>\n      <td>0.0537</td>\n      <td>0.00000</td>\n      <td>0.215</td>\n      <td>0.584</td>\n      <td>155.039</td>\n      <td>https://api.spotify.com/v1/tracks/56uXDJRCuoS7abX3SkzHKQ</td>\n      <td>https://api.spotify.com/v1/audio-analysis/56uXDJRCuoS7abX3SkzHKQ</td>\n      <td>224955.0</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>United States</td>\n      <td>us</td>\n      <td>3</td>\n      <td>Blueberry Faygo</td>\n      <td>Lil Mosey</td>\n      <td>8043475</td>\n      <td>22LAwLoDA5b4AaGSkg6bKW</td>\n      <td>0.774</td>\n      <td>0.554</td>\n      <td>0.0</td>\n      <td>-7.909</td>\n      <td>1.0</td>\n      <td>0.0383</td>\n      <td>0.2070</td>\n      <td>0.00000</td>\n      <td>0.132</td>\n      <td>0.349</td>\n      <td>99.034</td>\n      <td>https://api.spotify.com/v1/tracks/22LAwLoDA5b4AaGSkg6bKW</td>\n      <td>https://api.spotify.com/v1/audio-analysis/22LAwLoDA5b4AaGSkg6bKW</td>\n      <td>162547.0</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>12414</th>\n      <td>South Africa</td>\n      <td>za</td>\n      <td>198</td>\n      <td>Black And White</td>\n      <td>Niall Horan</td>\n      <td>11771</td>\n      <td>7rpNuuoMbid56XkDsx2FjE</td>\n      <td>0.443</td>\n      <td>0.582</td>\n      <td>2.0</td>\n      <td>-6.020</td>\n      <td>1.0</td>\n      <td>0.0482</td>\n      <td>0.0301</td>\n      <td>0.00000</td>\n      <td>0.127</td>\n      <td>0.239</td>\n      <td>147.589</td>\n      <td>https://api.spotify.com/v1/tracks/7rpNuuoMbid56XkDsx2FjE</td>\n      <td>https://api.spotify.com/v1/audio-analysis/7rpNuuoMbid56XkDsx2FjE</td>\n      <td>193090.0</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>12415</th>\n      <td>South Africa</td>\n      <td>za</td>\n      <td>199</td>\n      <td>When I See U</td>\n      <td>Fantasia</td>\n      <td>11752</td>\n      <td>4iuNZTcvT9diFySSzVsnVS</td>\n      <td>0.569</td>\n      <td>0.596</td>\n      <td>8.0</td>\n      <td>-6.486</td>\n      <td>1.0</td>\n      <td>0.1710</td>\n      <td>0.4570</td>\n      <td>0.00009</td>\n      <td>0.205</td>\n      <td>0.757</td>\n      <td>93.134</td>\n      <td>https://api.spotify.com/v1/tracks/4iuNZTcvT9diFySSzVsnVS</td>\n      <td>https://api.spotify.com/v1/audio-analysis/4iuNZTcvT9diFySSzVsnVS</td>\n      <td>217347.0</td>\n      <td>4.0</td>\n    </tr>\n    <tr>\n      <th>12416</th>\n      <td>South Africa</td>\n      <td>za</td>\n      <td>200</td>\n      <td>Psycho!</td>\n      <td>MASE</td>\n      <td>11743</td>\n      <td>5LKkteRQ1wWv7XCIEA5F2q</td>\n      <td>0.868</td>\n      <td>0.365</td>\n      <td>7.0</td>\n      <td>-9.510</td>\n      <td>1.0</td>\n      <td>0.0383</td>\n      <td>0.4330</td>\n      <td>0.00000</td>\n      <td>0.207</td>\n      <td>0.471</td>\n      <td>114.979</td>\n      <td>https://api.spotify.com/v1/tracks/5LKkteRQ1wWv7XCIEA5F2q</td>\n      <td>https://api.spotify.com/v1/audio-analysis/5LKkteRQ1wWv7XCIEA5F2q</td>\n      <td>197217.0</td>\n      <td>4.0</td>\n    </tr>\n  </tbody>\n</table>\n\n\n\n</template>\n\n</code-cell>\n\n\n<p>What's the name of the *NSYNC song in the resulting data?</p>\n\n<q-multiple-choice>\n  <q-opt text=\"This I Promise You\"><span>\"Great job!\"</span></q-opt>\n  <q-opt text=\"I Want You Back\"><span>\"Try again\"</span></q-opt>\n  <q-opt text=\"Bye Bye Bye\"><span>\"Try again\"</span></q-opt>\n  <q-opt text=\"It's Gonna Be Me\"><span>\"Try again\"</span></q-opt>    \n</q-multiple-choice>\n\n<details>\n    <summary>solution</summary>\n\n```python\n(music_top200\n  >> arrange(-_.artist)\n)\n```\n\n</details>\n\n\n</Notebook>\n\n","chunk":"data-viz"},"allPosts":{"edges":[{"node":{"id":"c07baa2fd37433b322b7f771f1fbf360","path":"/intro-data-science/","title":"","chunk":"","headings":[],"fileInfo":{"directory":"intro-data-science"}},"next":{"path":"/intro-data-science/build/01-intro-data-science/"},"previous":null},{"node":{"id":"652e7785105c1207d315c249131f5b7f","path":"/intro-data-science/build/01-intro-data-science/","title":"Course welcome","chunk":"overview","headings":[],"fileInfo":{"directory":"intro-data-science/build"}},"next":{"path":"/intro-data-science/build/01b-filter/"},"previous":{"path":"/intro-data-science/"}},{"node":{"id":"ba1582d1c6d27a522e11b03b97dff7b9","path":"/intro-data-science/build/01b-filter/","title":"Filter","chunk":"basics","headings":[],"fileInfo":{"directory":"intro-data-science/build"}},"next":{"path":"/intro-data-science/build/01c-arrange/"},"previous":{"path":"/intro-data-science/build/01-intro-data-science/"}},{"node":{"id":"ad19f602c352dfe1d79fefe29da15f7d","path":"/intro-data-science/build/01c-arrange/","title":"Arrange","chunk":"basics","headings":[],"fileInfo":{"directory":"intro-data-science/build"}},"next":{"path":"/intro-data-science/build/01d-mutate/"},"previous":{"path":"/intro-data-science/build/01b-filter/"}},{"node":{"id":"ab23fa24aeb29459d678ca42733d0864","path":"/intro-data-science/build/01d-mutate/","title":"Mutate","chunk":"basics","headings":[],"fileInfo":{"directory":"intro-data-science/build"}},"next":{"path":"/intro-data-science/build/01f-wrap-up/"},"previous":{"path":"/intro-data-science/build/01c-arrange/"}},{"node":{"id":"cce2a731d9223cc9c35f6ffb69ea5176","path":"/intro-data-science/build/01f-wrap-up/","title":"Wrap up","chunk":"basics","headings":[{"value":"Putting it together","anchor":"#putting-it-together"},{"value":"Exercises","anchor":"#exercises"}],"fileInfo":{"directory":"intro-data-science/build"}},"next":{"path":"/intro-data-science/readme/"},"previous":{"path":"/intro-data-science/build/01d-mutate/"}},{"node":{"id":"8b3cd3b360b88a353088b673cfcd8a66","path":"/intro-data-science/readme/","title":"","chunk":"","headings":[],"fileInfo":{"directory":"intro-data-science"}},"next":null,"previous":{"path":"/intro-data-science/build/01f-wrap-up/"}}]}},"context":{}}